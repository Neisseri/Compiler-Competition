--------------------------- building ast ---------------------------
parse tree: 
(compUnit 
        (compUnitItem 
            (funcDef 
                (funcType 
                    (bType int)) func ( 
                (funcFParams 
                    (funcFParam 
                        (bType int) a [ ] [ 
                        (exp 
                            (addExp 
                                (mulExp 
                                    (unaryExp 
                                        (primaryExp 
                                            (number 
                                                (intConst 5))))))) ] [ 
                        (exp 
                            (addExp 
                                (mulExp 
                                    (unaryExp 
                                        (primaryExp 
                                            (number 
                                                (intConst 5))))))) ])) ) 
                (block { 
                    (blockItem 
                        (stmt return 
                            (exp 
                                (addExp 
                                    (mulExp 
                                        (unaryExp 
                                            (primaryExp 
                                                (lVal a [ 
                                                    (exp 
                                                        (addExp 
                                                            (mulExp 
                                                                (unaryExp 
                                                                    (primaryExp 
                                                                        (number 
                                                                            (intConst 2))))))) ])))))) ;)) }))) 
        (compUnitItem 
            (funcDef 
                (funcType 
                    (bType int)) main ( ) 
                (block { 
                    (blockItem 
                        (decl 
                            (varDecl 
                                (bType int) 
                                (varDef a [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 5))))))) ] = 
                                    (initVal { 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 1)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 2)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 3)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 4)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 5)))))))) })) ;))) 
                    (blockItem 
                        (stmt return 
                            (exp 
                                (addExp 
                                    (mulExp 
                                        (unaryExp func ( 
                                            (funcRParams 
                                                (funcRParam 
                                                    (exp 
                                                        (addExp 
                                                            (mulExp 
                                                                (unaryExp 
                                                                    (primaryExp 
                                                                        (lVal a)))))))) ))))) ;)) }))) <EOF>)
visitCompUnit
visitCompUnit: funcDef
visitArrayParam
visitPrimaryExp_ number
visitArrayParam: dim_ is not nullptr
visitPrimaryExp_ number
visitArrayParam: dim_ is not nullptr
construct funct block: func
visitPrimaryExp_ number
visitBlock done!
construct funct block done!
visitCompUnit: funcDef
construct funct block: main
visitVarDecl: int start
visitVarDecl: array dim_size=1
visitPrimaryExp_ number
visitVarDecl: ident: a
visitVarDecl: initVal
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitCall ident: func
visitFuncRParams
visitCall args_list size: 1
visitBlock done!
construct funct block done!
visitCompUnit end create new program
visitCompUnit end create new program end
------------------------------type check------------------------------
Info: visitProgramProgram
Info: visitFuncDefint @func(int @a[0, 5, 5])
Info: visitParamDefint @a[0, 5, 5]
Info: visitBlock
Info: visitStatementReturn @a[2]
Info: visitExpr@a[2]
Info: visitLvalExpr@a[2]
Info: visitFuncDefint @main()
Info: visitBlock
Info: visitVarDef int @a = {1, 2, 3, 4, 5}
Info: visitDims 5
Info: visitExpr5
Info: visitIntLiteralExpr5
ret->type 0x55a38b471b50
Info: visitExpr{1, 2, 3, 4, 5}
Info: visitAssignmentExpr{1, 2, 3, 4, 5}
Info: visitExpr1
Info: visitAssignmentExpr1
Info: visitExpr1
Info: visitIntLiteralExpr1
ret->type 0x55a38b471bb0
Info: visitExpr2
Info: visitAssignmentExpr2
Info: visitExpr2
Info: visitIntLiteralExpr2
ret->type 0x55a38b472000
Info: visitExpr3
Info: visitAssignmentExpr3
Info: visitExpr3
Info: visitIntLiteralExpr3
ret->type 0x55a38b472030
Info: visitExpr4
Info: visitAssignmentExpr4
Info: visitExpr4
Info: visitIntLiteralExpr4
ret->type 0x55a38b471ac0
Info: visitExpr5
Info: visitAssignmentExpr5
Info: visitExpr5
Info: visitIntLiteralExpr5
ret->type 0x55a38b4720d0
Info: expr_type is nullptr , its an array ,return
Info: visitStatementReturn Call @func(@a)
Info: visitExprCall @func(@a)
Info: visiCalltExprCall @func(@a)
Info: visitExpr@a
Info: visitLvalExpr@a
ast: 
Program
  int @func(int @a#1[0, 5, 5])
    {
      Return @a#1[2]
    }
  int @main()
    {
      int @a#4 = {1, 2, 3, 4, 5}
      Return Call @func(@a#4)
    }
End of Program
--------------------------- building ir ---------------------------
visitProgram
visitFunction func
visitBlock 
visitStatement
visitExpression
visitExpressionLValue
visitIndex
visitExpression
visitExpressionintliteral
visitExpressionintliteral done
function func has 7 regs
B0:
  prev: 
  succ: 
B1:
  prev: 
  succ: 

B0:
  prev: 
  succ: 

entryB0
reverse_postorderB0
B0:
  doms: 
  domed_by: B0 

B0:
  DF: 

visitFunction main
visitBlock 
visit decl array
visitExpressionVal
visitExpression
visitExpression
visitExpressionintliteral
visitExpressionintliteral done
visitExpression
visitExpression
visitExpressionintliteral
visitExpressionintliteral done
visitExpression
visitExpression
visitExpressionintliteral
visitExpressionintliteral done
visitExpression
visitExpression
visitExpressionintliteral
visitExpressionintliteral done
visitExpression
visitExpression
visitExpressionintliteral
visitExpressionintliteral done
visit decl array done
visitStatement
visitExpression
visitExpression
visitExpressionLValue
function main has 18 regs
B2:
  prev: 
  succ: 
B3:
  prev: 
  succ: 

B2:
  prev: 
  succ: 

entryB2
reverse_postorderB2
B2:
  doms: 
  domed_by: B2 

B2:
  DF: 

ir:
; module
define i32 @main(){
B2:
  %1 = alloca int [5], 20
  %2 = 1
  %4 = 0
  %3 = add i32 %1, %4
  store i32 %2, ptr %3
  %5 = 2
  %7 = 4
  %6 = add i32 %1, %7
  store i32 %5, ptr %6
  %8 = 3
  %10 = 8
  %9 = add i32 %1, %10
  store i32 %8, ptr %9
  %11 = 4
  %13 = 12
  %12 = add i32 %1, %13
  store i32 %11, ptr %12
  %14 = 5
  %16 = 16
  %15 = add i32 %1, %16
  store i32 %14, ptr %15
  %18 = load i32, ptr %1
  %17 = call i32 @func(i32 %18)
  ret i32 %17

}
define i32 @func(i32){
B0:
  %2 = alloca int, 4
  store i32 %1, ptr %2
  %3 = 4
  %4 = 2
  %5 = mul i32 %4, %3
  %6 = add i32 %2, %5
  %7 = load i32, ptr %6
  ret i32 %7

}
--------------------------- building riscv ---------------------------
riscv: 
