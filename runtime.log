--------------------------- building ast ---------------------------
parse tree: 
(compUnit 
        (compUnitItem 
            (funcDef 
                (funcType 
                    (bType int)) main ( ) 
                (block { 
                    (blockItem 
                        (decl 
                            (varDecl 
                                (bType int) 
                                (varDef a [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 4))))))) ] [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 2))))))) ] = 
                                    (initVal { })) ;))) 
                    (blockItem 
                        (decl 
                            (varDecl 
                                (bType int) 
                                (varDef b [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 4))))))) ] [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 2))))))) ] = 
                                    (initVal { 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 1)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 2)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 3)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 4)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 5)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 6)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 7)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 8)))))))) })) ;))) 
                    (blockItem 
                        (decl 
                            (varDecl 
                                (bType int) 
                                (varDef c [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 4))))))) ] [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 2))))))) ] = 
                                    (initVal { 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 1)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 2)))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 3)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 4)))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 5)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 6)))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 7)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 8)))))))) }) })) ;))) 
                    (blockItem 
                        (decl 
                            (varDecl 
                                (bType int) 
                                (varDef d [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 4))))))) ] [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 2))))))) ] = 
                                    (initVal { 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 1)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 2)))))))) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 3)))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 5)))))))) }) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 7)))))))) , 
                                        (initVal 
                                            (exp 
                                                (addExp 
                                                    (mulExp 
                                                        (unaryExp 
                                                            (primaryExp 
                                                                (number 
                                                                    (intConst 8)))))))) })) ;))) 
                    (blockItem 
                        (decl 
                            (varDecl 
                                (bType int) 
                                (varDef e [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 4))))))) ] [ 
                                    (exp 
                                        (addExp 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (number 
                                                            (intConst 2))))))) ] = 
                                    (initVal { 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (lVal d [ 
                                                                        (exp 
                                                                            (addExp 
                                                                                (mulExp 
                                                                                    (unaryExp 
                                                                                        (primaryExp 
                                                                                            (number 
                                                                                                (intConst 2))))))) ] [ 
                                                                        (exp 
                                                                            (addExp 
                                                                                (mulExp 
                                                                                    (unaryExp 
                                                                                        (primaryExp 
                                                                                            (number 
                                                                                                (intConst 1))))))) ]))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (lVal c [ 
                                                                        (exp 
                                                                            (addExp 
                                                                                (mulExp 
                                                                                    (unaryExp 
                                                                                        (primaryExp 
                                                                                            (number 
                                                                                                (intConst 2))))))) ] [ 
                                                                        (exp 
                                                                            (addExp 
                                                                                (mulExp 
                                                                                    (unaryExp 
                                                                                        (primaryExp 
                                                                                            (number 
                                                                                                (intConst 1))))))) ]))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 3)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 4)))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 5)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 6)))))))) }) , 
                                        (initVal { 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 7)))))))) , 
                                            (initVal 
                                                (exp 
                                                    (addExp 
                                                        (mulExp 
                                                            (unaryExp 
                                                                (primaryExp 
                                                                    (number 
                                                                        (intConst 8)))))))) }) })) ;))) 
                    (blockItem 
                        (stmt return 
                            (exp 
                                (addExp 
                                    (addExp 
                                        (addExp 
                                            (addExp 
                                                (mulExp 
                                                    (unaryExp 
                                                        (primaryExp 
                                                            (lVal e [ 
                                                                (exp 
                                                                    (addExp 
                                                                        (mulExp 
                                                                            (unaryExp 
                                                                                (primaryExp 
                                                                                    (number 
                                                                                        (intConst 3))))))) ] [ 
                                                                (exp 
                                                                    (addExp 
                                                                        (mulExp 
                                                                            (unaryExp 
                                                                                (primaryExp 
                                                                                    (number 
                                                                                        (intConst 1))))))) ]))))) + 
                                            (mulExp 
                                                (unaryExp 
                                                    (primaryExp 
                                                        (lVal e [ 
                                                            (exp 
                                                                (addExp 
                                                                    (mulExp 
                                                                        (unaryExp 
                                                                            (primaryExp 
                                                                                (number 
                                                                                    (intConst 0))))))) ] [ 
                                                            (exp 
                                                                (addExp 
                                                                    (mulExp 
                                                                        (unaryExp 
                                                                            (primaryExp 
                                                                                (number 
                                                                                    (intConst 0))))))) ]))))) + 
                                        (mulExp 
                                            (unaryExp 
                                                (primaryExp 
                                                    (lVal e [ 
                                                        (exp 
                                                            (addExp 
                                                                (mulExp 
                                                                    (unaryExp 
                                                                        (primaryExp 
                                                                            (number 
                                                                                (intConst 0))))))) ] [ 
                                                        (exp 
                                                            (addExp 
                                                                (mulExp 
                                                                    (unaryExp 
                                                                        (primaryExp 
                                                                            (number 
                                                                                (intConst 1))))))) ]))))) + 
                                    (mulExp 
                                        (unaryExp 
                                            (primaryExp 
                                                (lVal a [ 
                                                    (exp 
                                                        (addExp 
                                                            (mulExp 
                                                                (unaryExp 
                                                                    (primaryExp 
                                                                        (number 
                                                                            (intConst 2))))))) ] [ 
                                                    (exp 
                                                        (addExp 
                                                            (mulExp 
                                                                (unaryExp 
                                                                    (primaryExp 
                                                                        (number 
                                                                            (intConst 0))))))) ])))))) ;)) }))) <EOF>)
visitCompUnit
visitCompUnit: funcDef
construct funct block: main
visitVarDecl: int start
visitVarDecl: array dim_size=2
visitPrimaryExp_ number
visitPrimaryExp_ number
visitVarDecl: ident: a
visitVarDecl: initVal
visitVarDecl: int start
visitVarDecl: array dim_size=2
visitPrimaryExp_ number
visitPrimaryExp_ number
visitVarDecl: ident: b
visitVarDecl: initVal
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitVarDecl: int start
visitVarDecl: array dim_size=2
visitPrimaryExp_ number
visitPrimaryExp_ number
visitVarDecl: ident: c
visitVarDecl: initVal
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitVarDecl: int start
visitVarDecl: array dim_size=2
visitPrimaryExp_ number
visitPrimaryExp_ number
visitVarDecl: ident: d
visitVarDecl: initVal
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitVarDecl: int start
visitVarDecl: array dim_size=2
visitPrimaryExp_ number
visitPrimaryExp_ number
visitVarDecl: ident: e
visitVarDecl: initVal
visitInit
visitPrimaryExp_ number
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitInit
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitPrimaryExp_ number
visitBlock done!
construct funct block done!
visitCompUnit end create new program
visitCompUnit end create new program end
------------------------------type check------------------------------
Info: visitProgramProgram
Info: visitFuncDefint @main()
Info: visitBlock
Info: visitVarDefint @a = {}
Info: visitExpr{}
Info: visitAssignmentExpr{}
Info: assignment->value is nullptr , its an array ,return nullptr
Info: expr_type is nullptr , its an array ,return
Info: visitVarDefint @b = {1, 2, 3, 4, 5, 6, 7, 8}
Info: visitExpr{1, 2, 3, 4, 5, 6, 7, 8}
Info: visitAssignmentExpr{1, 2, 3, 4, 5, 6, 7, 8}
Info: assignment->value is nullptr , its an array ,return nullptr
Info: expr_type is nullptr , its an array ,return
Info: visitVarDefint @c = {{1, 2}, {3, 4}, {5, 6}, {7, 8}}
Info: visitExpr{{1, 2}, {3, 4}, {5, 6}, {7, 8}}
Info: visitAssignmentExpr{{1, 2}, {3, 4}, {5, 6}, {7, 8}}
Info: assignment->value is nullptr , its an array ,return nullptr
Info: expr_type is nullptr , its an array ,return
Info: visitVarDefint @d = {1, 2, {3}, {5}, 7, 8}
Info: visitExpr{1, 2, {3}, {5}, 7, 8}
Info: visitAssignmentExpr{1, 2, {3}, {5}, 7, 8}
Info: assignment->value is nullptr , its an array ,return nullptr
Info: expr_type is nullptr , its an array ,return
Info: visitVarDefint @e = {{@d[2][1], @c[2][1]}, {3, 4}, {5, 6}, {7, 8}}
Info: visitExpr{{@d[2][1], @c[2][1]}, {3, 4}, {5, 6}, {7, 8}}
Info: visitAssignmentExpr{{@d[2][1], @c[2][1]}, {3, 4}, {5, 6}, {7, 8}}
Info: assignment->value is nullptr , its an array ,return nullptr
Info: expr_type is nullptr , its an array ,return
Info: visitStatementReturn @e[3][1]+@e[0][0]+@e[0][1]+@a[2][0]
Info: visitExpr@e[3][1]+@e[0][0]+@e[0][1]+@a[2][0]
Info: visitBinopExpr@e[3][1]+@e[0][0]+@e[0][1]+@a[2][0]
Info: visitExpr@e[3][1]+@e[0][0]+@e[0][1]
Info: visitBinopExpr@e[3][1]+@e[0][0]+@e[0][1]
Info: visitExpr@e[3][1]+@e[0][0]
Info: visitBinopExpr@e[3][1]+@e[0][0]
Info: visitExpr@e[3][1]
Info: visitLvalExpr@e[3][1]
Info: visitExpr@e[0][0]
Info: visitLvalExpr@e[0][0]
Info: visitExpr@e[0][1]
Info: visitLvalExpr@e[0][1]
Info: visitExpr@a[2][0]
Info: visitLvalExpr@a[2][0]
ast: 
Program
  int @main()
    {
      int @a = {}
      int @b = {1, 2, 3, 4, 5, 6, 7, 8}
      int @c = {{1, 2}, {3, 4}, {5, 6}, {7, 8}}
      int @d = {1, 2, {3}, {5}, 7, 8}
      int @e = {{@d[2][1], @c[2][1]}, {3, 4}, {5, 6}, {7, 8}}
      Return @e#2[3][1]+@e#2[0][0]+@e#2[0][1]+@a#2[2][0]
    }
End of Program
--------------------------- building ir ---------------------------
visitProgram
visitFunction main
visitBlock 
visit decl array
visitExpressionVal
visitExpressionVal
visit decl array done
visit decl array
visitExpressionVal
visitExpressionVal
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visit decl array done
visit decl array
visitExpressionVal
visitExpressionVal
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visit decl array done
visit decl array
visitExpressionVal
visitExpressionVal
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visit decl array done
visit decl array
visitExpressionVal
visitExpressionVal
visitExpression
visitExpression
visitIndex
visitExpression
visitExpression
visitExpression
visitExpression
visitIndex
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visitExpression
visit decl array done
visitExpression
visitExpression
visitExpression
visitExpression
visitIndex
visitExpression
